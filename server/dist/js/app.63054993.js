(function(e){function t(t){for(var s,i,o=t[0],u=t[1],c=t[2],m=0,d=[];m<o.length;m++)i=o[m],r[i]&&d.push(r[i][0]),r[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},r={app:0},a=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"09a9":function(e,t,n){},"0cfc":function(e,t,n){},"0e73":function(e,t,n){},1:function(e,t){},"1d94":function(e,t,n){},"23e8":function(e,t,n){},"28b1":function(e,t,n){"use strict";var s=n("0e73"),r=n.n(s);r.a},"44b9":function(e,t,n){"use strict";var s=n("f416"),r=n.n(s);r.a},5338:function(e,t,n){"use strict";var s=n("f9cc"),r=n.n(s);r.a},"560a":function(e,t,n){"use strict";var s=n("1d94"),r=n.n(s);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),r=n("8c4f"),a=n("2f62"),i=n("f87c"),o=n("8055"),u=n.n(o),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-link",{attrs:{to:"/leaderboard"}},[e._v("Leaderboard")]),n("router-link",{attrs:{to:"/"}},[e._v("Lobby")]),n("router-view")],1)},l=[],m=(n("6762"),n("2fdb"),{name:"app",computed:Object(a["b"])(["game"]),sockets:{newGame:function(e){var t=[e.player1.id,e.player2.id].includes(this.$socket.client.id);t&&(this.$store.commit("setGame",e),this.$router.push("play"))}}}),d=m,h=(n("5c0b"),n("2877")),p=Object(h["a"])(d,c,l,!1,null,null,null),g=p.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lobby"},[n("transition",{attrs:{name:"fade"}},[e.username?n("challengers",{attrs:{users:e.availableUsers}}):e._e()],1),n("transition",{attrs:{name:"fade"}},[e.username?e._e():n("login")],1)],1)},v=[],b=(n("8e6e"),n("ac6a"),n("456d"),n("75fc")),y=n("bd86"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"username-container"},[n("h3",[e._v("Enter your username:")]),n("input",{staticClass:"username",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUsername(t)}}})])},k=[],w={name:"Login",computed:Object(a["b"])(["username"]),methods:{addUsername:function(e){e.preventDefault();var t=e.target.value,n={id:this.$socket.client.id,username:t};this.$socket.client.emit("newUser",n),this.$store.commit("setUsername",t)}}},O=w,$=(n("5338"),Object(h["a"])(O,_,k,!1,null,null,null)),j=$.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"challengers"},[n("h3",[n("strong",[e._v(e._s(e.username))]),e._v(", who do you want to challenge?\n    ")]),n("ul",e._l(e.users,function(t){return n("challenger",{key:t.id,attrs:{user:t},on:{challenge:e.challenge}})}),1)])},x=[],M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"challenger"},[n("div",{staticClass:"name"},[e._v(e._s(e.user.username))]),n("div",{staticClass:"modes"},[n("button",{staticClass:"btn btn-success",on:{click:function(t){return e.challenge()}}},[e._v("Easy")]),n("button",{staticClass:"btn btn-danger",on:{click:function(t){return e.challenge("hard")}}},[e._v("Hard")])])])},E=[],P={name:"Challenger",props:{user:{type:Object}},methods:{challenge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"easy";this.$emit("challenge",this.user,e)}}},S=P,T=(n("28b1"),Object(h["a"])(S,M,E,!1,null,null,null)),G=T.exports,U={name:"Challengers",props:{users:{type:Array}},components:{Challenger:G},computed:Object(a["b"])(["username"]),methods:{challenge:function(e,t){var n={player1:{username:this.username,id:this.$socket.client.id},player2:e,round:1,userTurn:this.username,winner:null,melody:[],step:"add",mode:t};this.$socket.client.emit("startGame",n)}}},R=U,I=(n("e0e3"),Object(h["a"])(R,C,x,!1,null,null,null)),A=I.exports;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach(function(t){Object(y["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L={name:"Lobby",data:function(){return{onlineUsers:[{id:1,username:"Glocktopus"}]}},components:{Login:j,Challengers:A},computed:N({availableUsers:function(){var e=this;return this.onlineUsers.filter(function(t){return t.id&&t.id!=e.$socket.client.id&&t.username!=e.username})}},Object(a["b"])(["username"])),sockets:{updateUsers:function(e){this.onlineUsers=[{id:1,username:"Glocktopus"}].concat(Object(b["a"])(e))}}},B=L,V=(n("83c9"),Object(h["a"])(B,f,v,!1,null,null,null)),F=V.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"play-container"},[n("transition",{attrs:{name:"fade"}},[n("game",{on:{gameover:function(t){e.game=null}}})],1),n("transition",{attrs:{name:"fade"}},[n("chat")],1)],1)},K=[],H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game"},[n("div",{staticClass:"game-container"},[e._m(0),n("h5",[e._v("Round "+e._s(e.game.round))]),"guess"!=e.game.step||e.game.winner?e._e():n("div",{staticClass:"timer"},[e._v(e._s(e.timer))]),n("svg",{attrs:{width:"600",height:"300"}},e._l(e.notes,function(t,s){return n("key",{key:s,attrs:{id:s,note:t},on:{play:e.userPlay}})}),1),e.game.winner?e._e():n("p",[e.game.userTurn!=e.user.username?n("span",[e.game.round>1?n("span",[e._v("Nice moves.")]):e._e(),e._v("\n\t\t\t\tWaiting on "+e._s(e.challenger.username)+" ...\n\t\t\t")]):n("span",["listen"==e.game.step?n("span",[e._v(e._s(e.challenger.username)+" has made a move.")]):"add"==e.game.step?n("span",[1==e.game.round?n("span",[e._v("Add the first note.")]):n("span",[e._v("Add another note.")])]):"guess"==e.game.step?n("span",[e._v("Now play it back.")]):e._e()])]),e.game.winner||e.game.userTurn==e.user.username?e._e():n("spinner"),n("transition",{attrs:{name:"gameover"}},[e.game.winner?n("div",[e.game.winner==e.challenger.username?n("h5",{staticClass:"gameover"},[e._v("GAMEOVER")]):n("h5",{staticClass:"winner"},[e._v("WINNER")]),n("p",[n("strong",[e._v(e._s(e.game.winner)+" wins.")])]),n("button",{staticClass:"btn ai",on:{click:function(t){return e.backToLobby()}}},[e._v("Back to lobby")])]):e._e()]),n("div",{staticClass:"actions"},[e.game.userTurn==e.user.username&&"listen"==e.game.step?n("button",{staticClass:"btn",on:{click:function(t){return e.listen()}}},[e._v("Listen")]):e._e()]),e.game.player2.id<5&&e.game.userTurn==e.challenger.username&&!e.game.winner?n("button",{staticClass:"btn ai",on:{click:function(t){return e.aiMove()}}},[e._v("AI MOVE")]):e._e(),e._l(e.notes,function(e,t){return n("audio",{key:t,attrs:{id:t,preload:"auto"}},[n("source",{attrs:{src:e.sound,type:"audio/wav"}})])})],2)])},J=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[e._v("\n\t\t\tbeat\n\t\t\t"),n("br"),e._v("the\n\t\t\t"),n("br"),n("strong",[e._v("glock")])])}],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("rect",{staticClass:"key",style:"fill:"+e.color,attrs:{id:"note-"+e.id,x:e.x,y:e.y,rx:e.rx,ry:e.ry,width:e.width,height:e.height},on:{click:function(t){return e.play()}}})},z=[],Q={props:{id:String,note:Object},computed:{color:function(){return this.note.lit?"silver":this.note.color}},data:function(){return{x:null,y:0,rx:20,ry:20,height:null,width:60}},methods:{play:function(){this.$emit("play",this.id)}},mounted:function(){this.x=70*this.note.order,this.height=300-15*this.note.order}},X=Q,Y=(n("6587"),Object(h["a"])(X,q,z,!1,null,"a07e5c7e",null)),Z=Y.exports,ee={c:{order:0,lit:!1,color:"#ff8484",sound:"c.wav"},d:{order:1,lit:!1,color:"#861388",sound:"d.wav"},e:{order:2,lit:!1,color:"#4DCCBD",sound:"e.wav"},f:{order:3,lit:!1,color:"#231651",sound:"f.wav"},g:{order:4,lit:!1,color:"#FF5964",sound:"g.wav"},a:{order:5,lit:!1,color:"#FFE74C",sound:"a.wav"},b:{order:6,lit:!1,color:"#2374AB",sound:"b.wav"},c2:{order:7,lit:!1,color:"#A30B37",sound:"c2.wav"}},te=n("c06b"),ne=n("5118"),se={components:{Key:Z,Spinner:te["a"]},data:function(){return{guesses:[],notes:ee,challenger:null,user:null,speed:1e3,timer:0}},computed:Object(a["b"])(["username","game"]),sockets:{newMove:function(e){this.$store.commit("setGame",e)},updateUsers:function(e){var t=this,n=this,s=0==e.filter(function(e){return e.id==t.challenger.id}).length;s&&n.$store.dispatch("gameover",{round:n.game.round,winner:n.user.username,loser:n.challenger.username,mode:n.game.mode})}},created:function(){this.user={username:this.username,id:this.$socket.client.id},"hard"==this.game.mode&&(this.speed=500),this.user=this.game.player1.id==this.$socket.client.id?this.game.player1:this.game.player2,this.challenger=this.game.player1.id==this.$socket.client.id?this.game.player2:this.game.player1},methods:{backToLobby:function(){this.$store.commit("setGame",null),this.$router.push("/")},userPlay:function(e){this.game.userTurn==this.user.username&&("guess"==this.game.step?this.userGuess(e):"add"==this.game.step&&this.userAdd(e),this.$socket.client.emit("move",this.game))},userGuess:function(e){var t=this;this.guesses.push(e),this.play(e);var n=this.guesses.length-1;this.game.melody.length==this.guesses.length?this.submitGuess():this.guesses[n]!=this.game.melody[n]&&t.$store.dispatch("gameover",{round:t.game.round,winner:t.challenger.username,loser:t.user.username,mode:t.game.mode})},userAdd:function(e){this.play(e),this.$store.dispatch("makeValidMove",e)},aiMove:function(){var e=this,t=Math.floor(10*Math.random());t>("hard"==this.game.mode?9:5)?e.$store.dispatch("gameover",{round:e.game.round,winner:e.user.username,loser:e.challenger.username,mode:e.game.mode}):this.$store.dispatch("makeValidMove",this.getRandomNote())},submitGuess:function(){var e=this,t=this,n=!0;this.game.melody.forEach(function(t,s){t!=e.guesses[s]&&(n=!1)}),n?this.$store.commit("setStep","add"):this.$store.dispatch("gameover",{round:t.game.round,winner:t.challenger.username,loser:t.user.username,mode:t.game.mode}),this.guesses=[]},play:function(e){("easy"==this.game.mode||["guess","add"].includes(this.game.step))&&this.lightKey(e),this.playSound(e)},playSound:function(e){var t=document.getElementById(e);t.pause(),t.currentTime=0,t.play()},lightKey:function(e){var t=this;this.notes[e].lit=!0,Object(ne["setTimeout"])(function(){return t.notes[e].lit=!1},400)},listen:function(){var e=this;this.playMelody(this.speed),this.$store.commit("setStep",null),Object(ne["setTimeout"])(function(){e.$store.commit("setStep","guess");var t=parseInt((5e3+e.speed*e.game.melody.length*2)/1e3);e.startTimer(t)},this.game.melody.length*this.speed+1e3)},startTimer:function(e){var t=this;t.timer=e;var n=setInterval(function(){t.timer=t.timer-1,t.game&&t.game.userTurn!=t.challenger.username&&"add"!=t.game.step?t.timer<1&&(clearInterval(n),t.$store.dispatch("gameover",{round:t.game.round,winner:t.challenger.username,loser:t.user.username,mode:t.game.mode})):clearInterval(n)},1e3)},getRandomNote:function(){var e=["c","d","e","f","g","a","b","c2"],t=Math.floor(8*Math.random());return e[t]},playMelody:function(e){var t=this,n=0,s=setInterval(function(){t.game.melody[n]?t.play(t.game.melody[n]):clearInterval(s),n++},e)}}},re=se,ae=(n("bb9a"),Object(h["a"])(re,H,J,!1,null,null,null)),ie=ae.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat"},[n("h5",[e._v("\n\t\tChatting with:\n\t\t"),n("strong",[e._v(e._s(e.challenger.username))])]),n("div",{staticClass:"chat-container"},[n("transition-group",{attrs:{name:"message"}},e._l(e.messages,function(t,s){return n("message",{key:s,attrs:{enemy:t.author.id==e.challenger.id,message:t}})}),1),n("div",{staticClass:"input-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"form-control",domProps:{value:e.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.postMessage(e.user,e.message)},input:function(t){t.target.composing||(e.message=t.target.value)}}}),n("button",{staticClass:"btn btn-primary",on:{click:function(t){return t.preventDefault(),e.postMessage(e.user,e.message)}}},[e._v("SEND")]),n("button",{staticClass:"btn btn-primary",on:{click:function(t){return t.preventDefault(),e.aiResponse()}}},[e._v("AI")])])],1)])},ue=[],ce=(n("96cf"),n("3b8d")),le=n("bc3a"),me=n.n(le),de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message",class:{enemy:e.enemy,user:!e.enemy}},[n("span",{staticClass:"date"},[e._v(e._s(e._f("moment")(e.message.datetime,"H:mm A")))]),n("p",[e._v(e._s(e.message.message))])])},he=[],pe={name:"Message",props:{message:{type:Object},enemy:{type:Boolean}},data:function(){return{}}},ge=pe,fe=(n("560a"),Object(h["a"])(ge,de,he,!1,null,null,null)),ve=fe.exports,be={name:"Chat",components:{Message:ve},computed:Object(a["b"])(["username","game"]),data:function(){return{messages:[],message:"",challenger:null,user:null}},methods:{postMessage:function(e,t){this.$socket.client.emit("addMsg",{author:e,message:t,datetime:new Date}),this.message=""},aiResponse:function(){var e=Object(ce["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getInsult();case 2:t=e.sent,this.postMessage(this.challenger,t);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getInsult:function(){return new Promise(function(e,t){me.a.get("https://lakerolmaker-insult-generator-v1.p.rapidapi.com/?mode=random",{headers:{"x-rapidapi-host":"lakerolmaker-insult-generator-v1.p.rapidapi.com","x-rapidapi-key":"b82a516a4bmshd9e853bb88fc02bp1f25a5jsn6a067c1ea61d"}}).then(function(t){return e(t.data)}).catch(function(e){return t(e)})})}},sockets:{newMsg:function(e){this.messages.push(e)},updateUsers:function(e){var t=this,n=0==e.filter(function(e){return e.id==t.challenger.id}).length;n&&this.postMessage(this.challenger,"[disconnected]")}},created:function(){this.user=this.game.player1.id==this.$socket.client.id?this.game.player1:this.game.player2,this.challenger=this.game.player1.id==this.$socket.client.id?this.game.player2:this.game.player1}},ye=be,_e=(n("44b9"),Object(h["a"])(ye,oe,ue,!1,null,null,null)),ke=_e.exports,we={name:"Play",components:{Game:ie,Chat:ke}},Oe=we,$e=(n("fc58"),Object(h["a"])(Oe,W,K,!1,null,null,null)),je=$e.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"leaderboard-container"},[n("h1",[e._v("Leaderboard")]),n("ol",e._l(e.orderedResults,function(t){return n("li",{key:t._id},[n("strong",[e._v(e._s(t.winner))]),e._v(" beat "+e._s(t.loser)+" - "+e._s(t.round)+" rounds\n        ")])}),0)])},xe=[],Me=(n("55dd"),{name:"Play",components:{Game:ie,Chat:ke},computed:{orderedResults:function(){return this.results?this.results.sort(this.compare):[]}},data:function(){return{results:null}},methods:{compare:function(e,t){return e.round<t.round?1:e.round>t.round?-1:0}},mounted:function(){var e=this;me.a.get("/api/leaderboard").then(function(t){return e.results=t.data}).catch(function(e){return console.log(e)})}}),Ee=Me,Pe=(n("ca63"),Object(h["a"])(Ee,Ce,xe,!1,null,null,null)),Se=Pe.exports,Te=u()("https://beat-tha-glock.herokuapp.com");s["a"].use(r["a"]),s["a"].use(a["a"]),s["a"].use(i["a"],Te),s["a"].use(n("2ead"));var Ge=[{path:"/",component:F},{path:"/play",component:je},{path:"/leaderboard",component:Se}],Ue=new r["a"]({routes:Ge}),Re=new a["a"].Store({state:{username:null,game:null},mutations:{setUsername:function(e,t){e.username=t},setGame:function(e,t){e.game=t},setWinner:function(e,t){e.game.winner=t},setStep:function(e,t){e.game.step=t},addRound:function(e){e.game.round++},addMelodyNote:function(e,t){e.game.melody.push(t)},switchUser:function(e){var t=e.game.userTurn;e.game.userTurn=t==e.game.player1.username?e.game.player2.username:e.game.player1.username}},getters:{game:function(e){return e.game},username:function(e){return e.username}},actions:{makeValidMove:function(e,t){e.commit("addMelodyNote",t),e.commit("switchUser"),e.commit("addRound"),e.commit("setStep","listen")},gameover:function(e,t){e.commit("setWinner",t.winner),me.a.post("/api/games",t)}}});new s["a"]({store:Re,router:Ue,render:function(e){return e(g)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var s=n("5e27"),r=n.n(s);r.a},"5e27":function(e,t,n){},6587:function(e,t,n){"use strict";var s=n("ff87"),r=n.n(s);r.a},8145:function(e,t,n){},"83c9":function(e,t,n){"use strict";var s=n("23e8"),r=n.n(s);r.a},bb9a:function(e,t,n){"use strict";var s=n("be05"),r=n.n(s);r.a},be05:function(e,t,n){},ca63:function(e,t,n){"use strict";var s=n("8145"),r=n.n(s);r.a},e0e3:function(e,t,n){"use strict";var s=n("0cfc"),r=n.n(s);r.a},f416:function(e,t,n){},f9cc:function(e,t,n){},fc58:function(e,t,n){"use strict";var s=n("09a9"),r=n.n(s);r.a},ff87:function(e,t,n){}});
//# sourceMappingURL=app.63054993.js.map